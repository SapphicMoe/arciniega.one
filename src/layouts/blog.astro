---
import Layout from '@layouts/page.astro';

import { Icon } from 'astro-icon';

import Footer from '@components/footer.astro';
import Line from '@components/underline.astro';

interface Props {
    description: string;
    title: string;
}

const { content } = Astro.props;

let author = Astro.props.author ?? content.author ?? '';
let description = Astro.props.description ?? content.description ?? '';
let image = Astro.props.image ?? content.image ?? '';
let pubDate = Astro.props.pubDate ?? content.pubDate ?? '';
let tags = Astro.props.tags ?? content.tags ?? '';
let title = Astro.props.title ?? content.title ?? '';
---

<Layout description={description} siteName={Astro.site?.hostname} title={title}>
    <Line>My blog</Line>

    <!-- Title -->
    <h2>{title}</h2>

    <!-- Date and author  -->
    <time>
        <Icon size={20} name="mdi:calendar" />
        {
            new Date(pubDate).toLocaleDateString('en-us', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            })
        },
    </time>

    <span>
        <Icon size={20} name="mdi:account" />
        {author}
    </span>

    <p>
        <Icon size={20} name="mdi:tag" />
        {tags ? tags.join(', ') : tags}
    </p>

    <!-- Checks if the post's image exists -->
    {image.url ? <img src={image.url} title={image.alt} /> : null}

    <!-- The blog's content itself -->
    <slot />

    <Footer />
</Layout>
