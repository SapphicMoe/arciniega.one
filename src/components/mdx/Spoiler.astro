---
import { Icon } from 'astro-icon/components';

interface Props {
  description: string;
  src: {
    discriminant: boolean;
    value: string;
  };
  alt: string;
  caption?: string;
}

const {
  description,
  src: { value: src },
  alt,
  caption,
} = Astro.props;
---

<div class="flex flex-col gap-4">
  <span>{description} (spoiler warning!)</span>

  <details
    class="border-2 border-ctp-mauve bg-ctp-crust p-4 dark:border-ctp-pink [&_svg[data-icon='mdi:caret-down']]:open:-rotate-180"
  >
    <summary class="flex cursor-pointer flex-wrap items-center justify-between gap-4">
      <div class="flex flex-row gap-2">Spoiler</div>

      <Icon name="mdi:caret-down" class="mb-1" size={30} aria-disabled={true} />
    </summary>

    <div class="flex flex-col pt-5">
      <img class="-mt-0.5" {src} {alt} />
      <figcaption class="-mt-6">{caption}</figcaption>
    </div>
  </details>
</div>
